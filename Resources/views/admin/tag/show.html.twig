{% extends eztags_admin.pageLayoutTemplate %}

{% trans_default_domain 'eztags_admin' %}

{% block content %}
    <h2>{{ 'tag.show.title_label'|trans }}: {{ netgen_tags_tag_keyword(tag) }}</h2>
    <p>{{ 'tag.show.last_modified'|trans }}: {{ tag.modificationDate|date('d/m/Y g:i a') }} ({{ 'tag.show.tag_id'|trans }}: {{ tag.id }})</p>

    <h3>{{ 'tag.show.latest_label'|trans }}</h3>

    <table>
        <thead>
        <tr>
            <th>{{ 'tag.show.latest_table_id'|trans }}</th>
            <th>{{ 'tag.show.latest_table_name'|trans }}</th>
            <th>{{ 'tag.show.latest_table_modified'|trans }}</th>
            <th>{{ 'tag.show.latest_table_class'|trans }}</th>
        </tr>
        </thead>
        <tbody>
        {% for content in relatedContent %}
            <tr>
                <td>{{ content.contentInfo.id }}</td>
                <td>{{ ez_content_name(content) }}</td>
                <td>{{ content.contentInfo.modificationDate|date('d.m.Y H:i') }}</td>
                <td>{{ netgen_tags_content_type_name(content.contentInfo.contentTypeId) }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <h3>{{ 'tag.show.translations_label'|trans }} ({{ tag.keywords|length }})</h3>

    <table>
        <thead>
            <tr>
                <th>{{ 'tag.show.translations_table_langunage'|trans }}</th>
                <th>{{ 'tag.show.translations_table_translation'|trans }}</th>
                <th>{{ 'tag.show.translations_table_locale'|trans }}</th>
            </tr>
        </thead>
        <tbody>
        {% for languageCode, keyword in tag.keywords %}
            <tr>
                <td>{{ netgen_tags_language_name(languageCode) }}</td>
                <td>{{ keyword }}</td>
                <td>{{ languageCode }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <h3>{{ 'tag.show.synonyms_label'|trans }} ({{ synonyms|length }})</h3>

    {% if synonyms is empty %}
        <p>{{  'tag.show.synonyms_empty'|trans }}</p>
    {% else %}

    <table>
        <thead>
        <tr>
            <th>{{ 'tag.show.synonyms_table_id'|trans }}</th>
            <th>{{ 'tag.show.synonyms_table_name'|trans }}</th>
            <th>{{ 'tag.show.synonyms_table_modified'|trans }}</th>
        </tr>
        </thead>
        <tbody>
        {% for synonym in synonyms %}
            <tr>
                <td>{{ synonym.id }}</td>
                <td>{{ netgen_tags_tag_keyword(synonym) }}</td>
                <td>{{ synonym.modificationDate|date('d/m/Y h:i') }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}

    <h3>{{ 'tag.show.children_tags_label'|trans }} ({{ childrenTags|length }})</h3>

    {% if childrenTags is empty %}
        <p>{{  'tag.show.children_tags_empty'|trans }}</p>
    {% else %}

        <table>
            <thead>
            <tr>
                <th>{{ 'tag.show.children_tags_table_id'|trans }}</th>
                <th>{{ 'tag.show.children_tags_table_name'|trans }}</th>
                <th>{{ 'tag.show.children_tags_table_translations'|trans }}</th>
                <th>{{ 'tag.show.children_tags_table_modified'|trans }}</th>
            </tr>
            </thead>
            <tbody>
            {% for tag in childrenTags %}
                <tr>
                    <td>{{ tag.id }}</td>
                    <td>{{ netgen_tags_tag_keyword(tag) }}</td>
                    <td>{{ tag.keywords|keys|join(', ') }}</td>
                    <td>{{ tag.modificationDate|date('d/m/Y h:i') }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

    <h3>{{ 'tag.show.subtree_limitations_label'|trans }} ({{ subTreeLimitations|length }})</h3>

    {% if subTreeLimitations is empty %}
        <p>{{  'tag.show.subtree_limitations_empty'|trans }}</p>
    {% else %}

        <table>
            <thead>
            <tr>
                <th>{{ 'tag.show.subtree_limitations_table_id'|trans }}</th>
                <th>{{ 'tag.show.subtree_limitations_table_name'|trans }}</th>
                <th>{{ 'tag.show.subtree_limitations_table_identifier'|trans }}</th>
            </tr>
            </thead>
            <tbody>
            {% for subTreeLimitation in subTreeLimitations %}
                <tr>
                    <td>{{ subTreeLimitation.contentTypeId }}</td>
                    <td>{{ netgen_tags_content_type_name(subTreeLimitation.contentTypeId) }}</td>
                    <td>{{ subTreeLimitation.attributeIdentifier }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}
{% endblock %}